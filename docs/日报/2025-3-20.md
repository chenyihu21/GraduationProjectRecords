# 运行测例

## 流程

- 在apps下创建tests文件夹
- 在tests文件夹下创建并编写prlimit64.c文件
- tests下创建build文件夹
- 在tests文件夹下创建testcase_list文件，添加测例
- tests下执行riscv64-linux-musl-gcc -static apps/tests/prlimit64.c -o apps/tests/build/prlimit64
- starry-next下执行sudo ./build_img.sh -a x86_64 -fs ext4 -file apps/tests/build/ -s 30
- make AX_TESTCASE=tests ARCH=riscv64 EXTRA_CONFIG=../configs/riscv64.toml BLK=y NET=y SMP=4 FEATURES=fp_simd,lwext4_rs LOG=info run

## 测试结果(失败，正在调试)
```shell
[  6.203695 0:10 starry::syscall_imp:57] Syscall set_tid_address
[  6.233718 0:10 starry::syscall_imp:170] Syscall set_tid_address return 10
[  6.244388 0:10 starry::syscall_imp:57] Syscall getpid
[  6.250047 0:10 starry::syscall_imp:170] Syscall getpid return 10
[  6.256574 0:10 starry::syscall_imp:57] Syscall prlimit64
[  6.266883 0:10 starry::syscall_imp::task::thread:213] sys_prlimit64 => Err(EFAULT)
[  6.277822 0:10 starry::syscall_imp:170] Syscall prlimit64 return -14
[  6.288521 0:10 starry::syscall_imp:57] Syscall writev
prlimit64 get stack limit failed[  6.318049 0:10 starry::syscall_imp:170] Syscall writev return 32
[  6.326058 0:10 starry::syscall_imp:57] Syscall writev
:[  6.330115 0:10 starry::syscall_imp:170] Syscall writev return 1
[  6.335907 0:10 starry::syscall_imp:57] Syscall writev
 [  6.340294 0:10 starry::syscall_imp:170] Syscall writev return 1
[  6.347025 0:10 starry::syscall_imp:57] Syscall writev
Bad address[  6.352396 0:10 starry::syscall_imp:170] Syscall writev return 11
[  6.358162 0:10 starry::syscall_imp:57] Syscall writev

[  6.364011 0:10 starry::syscall_imp:170] Syscall writev return 1
[  6.372136 0:10 starry::syscall_imp:57] Syscall exit_group
[  6.377821 0:10 starry::syscall_imp::task::thread:62] Temporarily replace sys_exit_group with sys_exit
[  6.407838 1:2 starry:59] User task /prlimit64 exited with code: Some(1)
[  6.428410 1:2 axhal::platform::riscv64_qemu_virt::misc:3] Shutting down...
```